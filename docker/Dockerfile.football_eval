FROM football_base

# gcloud install
RUN \
  apt-get install --yes apt-transport-https ca-certificates gnupg &&\
  echo "deb [signed-by=/usr/share/keyrings/cloud.google.gpg] https://packages.cloud.google.com/apt cloud-sdk main" | tee -a /etc/apt/sources.list.d/google-cloud-sdk.list &&\
  curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key --keyring /usr/share/keyrings/cloud.google.gpg add - &&\
  apt-get update --yes &&\
  apt-get install --yes google-cloud-sdk

RUN mkdir -p /root/.config/gcloud
RUN mkdir -p /eval_logs

# NOW it is redundant. In the future it may prevent some bugs
WORKDIR /gfootball_zpp

ENTRYPOINT ["gfootball_zpp/eval_docker_dir/run.sh"]
